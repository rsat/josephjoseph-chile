---
import Layout from '../layouts/Layout.astro';
import StickyNav from '../components/StickyNav.astro';
import Hero from '../components/Hero.astro';
import Footer from '../components/Footer.astro';
import ProductCard from '../components/ProductCard.astro';
import WhyJosephJoseph from '../components/WhyJosephJoseph.astro';
import Newsletter from '../components/Newsletter.astro';
import { getProducts, getCategories } from '../lib/strapi';
import { retailers } from '../data/retailers';

const products = await getProducts();

const categories = [...new Set(products.map(p => p.category))].map(cat => ({
	name: cat,
	slug: cat.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/\s+/g, '-'),
	icon: getCategoryIcon(cat),
}));

function getCategoryIcon(category: string) {
	const icons: Record<string, string> = {
		'Preparaci√≥n': 'üî™',
		'Utensilios': 'ü•Ñ',
		'Almacenamiento': 'üì¶',
		'Organizaci√≥n': 'üóÇÔ∏è',
		'Hogar': 'üè†',
		'Accesorios': '‚öñÔ∏è',
	};
	return icons[category] || 'üçΩÔ∏è';
}
---

<Layout title="Joseph Joseph Chile - Dise√±o Inteligente para tu Cocina">
	<StickyNav />
	<Hero />

	<!-- Intro Section -->
	<section class="intro">
		<div class="container">
			<h2>Joseph Joseph</h2>
			<p class="intro-text">
				Dise√±o brit√°nico innovador, ahora en Chile. Productos de menaje que combinan
				funcionalidad, estilo y soluciones inteligentes para tu hogar.
			</p>
		</div>
	</section>

	<!-- Featured Products -->
	<section class="products" id="productos">
		<div class="container">
			<div class="products-header">
				<h2>Productos Destacados</h2>
				<a href="/productos" class="view-all-btn">Ver todos ‚Üí</a>
			</div>
			<div class="product-grid">
				{products.slice(0, 6).map((product) => (
					<ProductCard product={product} />
				))}
			</div>
		</div>
	</section>

	<WhyJosephJoseph />

	<!-- Categories Section -->
	<section class="categories">
		<div class="container">
			<h2>Explora por Categor√≠a</h2>
			<div class="category-grid">
				{categories.map((cat) => (
					<a href={`/categorias/${cat.slug}`} class="category-card">
						<div class="category-icon">{cat.icon}</div>
						<h3>{cat.name}</h3>
						<span class="view-link">Ver productos ‚Üí</span>
					</a>
				))}
			</div>
		</div>
	</section>

	<!-- Where to Buy -->
	<section class="where-to-buy" id="donde-comprar">
		<div class="container">
			<h2>D√≥nde Comprar</h2>
			<p class="section-subtitle">Encuentra productos Joseph Joseph en estas tiendas</p>
			<div class="retailers-grid">
				{retailers.map((retailer) => (
					<a href={retailer.url} class="retailer-card" target="_blank" rel="noopener">
						<div class="retailer-logo">{retailer.icon}</div>
						<h3>{retailer.name}</h3>
						<span class="cta-link">Ver productos ‚Üí</span>
					</a>
				))}
			</div>
		</div>
	</section>

	<!-- About Section -->
	<section class="about" id="sobre-nosotros">
		<div class="container">
			<div class="about-content">
				<h2>Sobre Joseph Joseph</h2>
				<p>
					Joseph Joseph es una marca brit√°nica de dise√±o que revoluciona el menaje del hogar
					con productos innovadores, funcionales y est√©ticamente excepcionales.
				</p>
				<p>
					Desde 2003, los hermanos Antony y Richard Joseph han creado soluciones ingeniosas
					que simplifican las tareas diarias en la cocina, ganando m√°s de 100 premios
					internacionales de dise√±o.
				</p>
				<p>
					Ahora en Chile, trae a tu hogar la calidad y el dise√±o brit√°nico que ha
					conquistado el mundo.
				</p>
			</div>
		</div>
	</section>

	<Newsletter />

	<Footer />
</Layout>

<style>
	/* Intro Section */
	.intro {
		padding: 5rem 0;
		text-align: center;
	}

	.intro h2 {
		font-size: 2.5rem;
		font-weight: 500;
		color: var(--color-dark);
		margin-bottom: 1.5rem;
	}

	.intro-text {
		max-width: 700px;
		margin: 0 auto;
		font-size: 1.125rem;
		color: var(--color-text-light);
		line-height: 1.8;
	}

	/* Products Section */
	.products {
		padding: 5rem 0;
		background: white;
	}

	.products-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 3rem;
	}

	.products h2 {
		font-size: 2rem;
		font-weight: 500;
		color: var(--color-dark);
		margin: 0;
	}

	.view-all-btn {
		color: var(--color-text-light);
		font-size: 1rem;
		font-weight: 500;
		text-decoration: none;
		transition: color 0.3s ease;
	}

	.view-all-btn:hover {
		color: var(--color-dark);
	}

	.product-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
		gap: 3rem;
	}

	/* Categories Section */
	.categories {
		padding: 5rem 0;
		background: var(--color-stone);
	}

	.categories h2 {
		font-size: 2rem;
		font-weight: 500;
		text-align: center;
		margin-bottom: 3rem;
		color: var(--color-dark);
	}

	.category-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
	}

	.category-card {
		background: white;
		padding: 2rem;
		border-radius: 8px;
		text-align: center;
		transition: transform 0.3s ease, box-shadow 0.3s ease;
	}

	.category-card:hover {
		transform: translateY(-4px);
		box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
	}

	.category-icon {
		font-size: 3rem;
		margin-bottom: 1rem;
	}

	.category-card h3 {
		font-size: 1.25rem;
		font-weight: 500;
		margin-bottom: 0.5rem;
		color: var(--color-dark);
	}

	.view-link {
		color: var(--color-text-light);
		font-size: 0.9375rem;
		margin-top: 0.5rem;
		display: inline-block;
	}

	.category-card:hover .view-link {
		color: var(--color-dark);
	}

	/* Where to Buy Section */
	.where-to-buy {
		padding: 5rem 0;
	}

	.where-to-buy h2 {
		font-size: 2rem;
		font-weight: 500;
		text-align: center;
		margin-bottom: 1rem;
		color: var(--color-dark);
	}

	.section-subtitle {
		text-align: center;
		color: var(--color-text-light);
		margin-bottom: 3rem;
		font-size: 1.125rem;
	}

	.retailers-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
	}

	.retailer-card {
		background: white;
		border: 2px solid var(--color-gray);
		padding: 2.5rem 2rem;
		border-radius: 8px;
		text-align: center;
		transition: all 0.3s ease;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
	}

	.retailer-card:hover {
		border-color: var(--color-dark);
		transform: translateY(-4px);
		box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
	}

	.retailer-logo {
		font-size: 3rem;
	}

	.retailer-card h3 {
		font-size: 1.5rem;
		font-weight: 500;
		color: var(--color-dark);
	}

	.cta-link {
		color: var(--color-text-light);
		font-size: 0.9375rem;
		font-weight: 500;
	}

	.retailer-card:hover .cta-link {
		color: var(--color-dark);
	}

	/* About Section */
	.about {
		padding: 5rem 0;
		background: var(--color-stone);
	}

	.about-content {
		max-width: 800px;
		margin: 0 auto;
	}

	.about h2 {
		font-size: 2rem;
		font-weight: 500;
		margin-bottom: 2rem;
		color: var(--color-dark);
	}

	.about p {
		font-size: 1.0625rem;
		line-height: 1.8;
		color: var(--color-text);
		margin-bottom: 1.5rem;
	}

	/* Responsive */
	@media (max-width: 768px) {
		.products-header {
			flex-direction: column;
			gap: 1rem;
			text-align: center;
		}
		.intro h2 {
			font-size: 2rem;
		}

		.products h2,
		.categories h2,
		.where-to-buy h2,
		.about h2 {
			font-size: 1.75rem;
		}

		.product-grid {
			grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
			gap: 2rem;
		}
	}
</style>
